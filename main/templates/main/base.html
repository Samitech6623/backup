{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    {# External CSS and JS #}
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    
    {# Custom CSS must be linked AFTER Bootstrap for easy overriding #}
    <link rel="stylesheet" href="{% static 'css/base.css' %}?v=3">
    
    {% block head %}
        <title>{% block title %}Edenfield Academy{% endblock %}</title>
    {% endblock %}
</head>
<body>
    <header>
        {% comment %} 
            The school logo and name structure remains, wrapped in h1 for semantic meaning.
        {% endcomment %}
        <h1>
            <div class="school-logo-container">
                <img src="{% static 'images/logo.jpeg' %}" alt="Edenfield Academy Logo">
            </div>
            <div>
                <div>Edenfield Academy</div>
            </div>  
        </h1>
        <button class="hamburger-menu" aria-label="Toggle navigation" id="hamburger-toggle">
            &#9776; </button>
        <nav class="main-nav" id="mobile-nav-links">

            {% with current_url=request.resolver_match.url_name %}
            
            <a href="{% url 'home' %}" class="{% if current_url == 'home' %}active-link{% endif %}">Home</a>
            <a href="{% url 'about' %}" class="{% if current_url == 'about' %}active-link{% endif %}">About</a>
            <a href="{% url 'classes' %}" class="{% if current_url == 'classes' %}active-link{% endif %}">Classes</a>
            <a href="{% url 'contact' %}" class="{% if current_url == 'contact' %}active-link{% endif %}">Contact</a>
            
            <div class="dropdown">
                {# The dropdown button itself is often not linked, or linked to the first item #}
                <a href="#" class="dropbtn {% if current_url in 'admission,gallery,events,FAQs' %}active-link{% endif %}">More</a>
                <ul class="dropdown-content">
                    <li><a href="{% url 'admission' %}" class="{% if current_url == 'admission' %}active-link{% endif %}">Admission</a></li>
                    <li><a href="{% url 'gallery' %}" class="{% if current_url == 'gallery' %}active-link{% endif %}">Gallery</a></li>
                    <li><a href="{% url 'events' %}" class="{% if current_url == 'events' %}active-link{% endif %}">Calendar & Events</a></li>
                    <li><a href="{% url 'FAQs' %}" class="{% if current_url == 'FAQs' %}active-link{% endif %}">FAQs</a></li>
                </ul>
            </div>
            
            <a href="{% url 'portal_selection' %}"><button class="portalButton">Portal</button></a>
            
            {% endwith %}
        </nav>
    </header>

    <main>
        {% comment %} 
            This div is critical. It compensates for the fixed header's height 
            using the compensation margin defined in base.css.
        {% endcomment %}
        <div class="header-compensation-padding"></div>
        
        {% block content %}{% endblock %}
    </main>

    <footer>
        <div class="footer-content">
            <p class="credit">Created by <strong>@Samitech Technologies</strong> | 0791577972</p>
            <p class="copyright">
                &copy; 2025 Edenfield Academy. All rights reserved.
            </p>
        </div>
    </footer>
    
    
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.min.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const hamburger = document.getElementById('hamburger-toggle');
            const navLinks = document.getElementById('mobile-nav-links');

            hamburger.addEventListener('click', function() {
                navLinks.classList.toggle('is-open');
            });
            
            // Close menu when a link is clicked (useful for single-page navigation or redirect)
            navLinks.querySelectorAll('a').forEach(link => {
                link.addEventListener('click', () => {
                    if (navLinks.classList.contains('is-open')) {
                        navLinks.classList.remove('is-open');
                    }
                });
            });
        });
    </script>
</body>
</html>